<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Remote Tool KHANHPC</title>
<link rel="icon" href="GD.png" type="image/png">
<style>
:root {
    --main: #00ffcc;
    --accent: #00b3ff;
    --bg: #0e0e0e;
    --card: #1a1a1a;
    --text: #fff;
}
* { box-sizing:border-box; margin:0; padding:0; font-family:'Segoe UI', sans-serif; }
body {
    background: radial-gradient(circle at top, #1f1f1f, #000);
    display:flex; justify-content:center; align-items:center;
    height:100vh; color: var(--text); padding:10px;
}
.card {
    background: var(--card);
    width:100%; max-width:400px; border-radius:20px;
    padding:30px 25px; text-align:center; box-shadow:0 0 40px rgba(0,255,204,.15);
    animation: fadeIn 0.8s ease;
}
h1 { font-size:28px; color: var(--main); margin-bottom:25px; text-shadow:0 0 12px rgba(0,255,204,.6);}
button {
    width:100%; padding:16px; margin:12px 0; font-size:18px; font-weight:bold;
    border:none; border-radius:14px; cursor:pointer; background:linear-gradient(135deg,var(--main),var(--accent)); color:#000;
    transition:0.3s;
}
button:hover:not(:disabled) { transform:translateY(-2px); box-shadow:0 8px 25px rgba(0,255,204,.4);}
button:disabled { opacity:0.5; cursor:not-allowed;}
.status { margin-top:20px; min-height:60px; padding:15px; border-radius:12px; background:#111; word-break:break-word; font-size:16px;}
.key { color: var(--main); font-size:20px; font-weight:bold;}
.loader { width:40px; height:40px; border:4px solid rgba(255,255,255,.2); border-top:4px solid var(--main); border-radius:50%; margin:15px auto; animation:spin 1s linear infinite;}
.hidden { display:none; }
@keyframes spin { to { transform: rotate(360deg); } }
@keyframes fadeIn { from {opacity:0; transform:scale(.95);} to {opacity:1; transform:scale(1);} }
@media (max-width:480px) { h1{font-size:24px;} button{font-size:16px;padding:14px;} .status{font-size:14px;} }
</style>
</head>
<body>

<div class="card">
    <h1>REMOTE TOOL PC</h1>
    <button id="btnGet" onclick="getKey()">üîë L·∫§Y M√É</button>
    <button id="btnVerify" onclick="verify()" disabled>‚úÖ X√ÅC TH·ª∞C</button>
    <div class="status" id="status">Ch∆∞a c√≥ m√£</div>
    <div class="loader hidden" id="loader"></div>
</div>

<script>
const statusBox = document.getElementById("status");
const loader = document.getElementById("loader");
const btnGet = document.getElementById("btnGet");
const btnVerify = document.getElementById("btnVerify");

function getKey() {
    btnGet.disabled = true; btnVerify.disabled = true;
    loader.classList.remove("hidden");
    statusBox.innerHTML = "‚è≥ ƒêang l·∫•y m√£... <br><small>ƒê·ª´ng s·ªù chu·ªôt üòÖ</small>";

    fetch("/start",{method:"POST"});

    let tries=0; const maxTries=40; // 20s
    const interval = setInterval(()=>{
        fetch("/key").then(r=>r.json()).then(d=>{
            if(d.key){
                loader.classList.add("hidden");
                statusBox.innerHTML=`<div class="key">KEY: ${d.key}</div>`;
                btnVerify.disabled=false;
                clearInterval(interval);
            } else {
                tries++;
                if(tries>=maxTries){
                    loader.classList.add("hidden");
                    statusBox.innerHTML="‚ùå Kh√¥ng l·∫•y ƒë∆∞·ª£c m√£ üò≠";
                    btnGet.disabled=false;
                    clearInterval(interval);
                }
            }
        }).catch(()=>{
            loader.classList.add("hidden");
            statusBox.innerHTML="üí• L·ªói k·∫øt n·ªëi server";
            btnGet.disabled=false;
            clearInterval(interval);
        });
    },500);
}

function verify() {
    btnVerify.disabled=true; loader.classList.remove("hidden");
    statusBox.innerHTML="üîê ƒêang x√°c th·ª±c...";
    fetch("/verify",{method:"POST"}).then(()=>{
        setTimeout(()=>{
            loader.classList.add("hidden");
            statusBox.innerHTML="‚úÖ X√°c th·ª±c xong! Chu·∫©n b√†i üòé";
            btnGet.disabled=false;
        },2500);
    });
}
</script>

</body>
</html>
